CREATE DATABASE BILLING;
USE BILLING;
CREATE TABLE `USERS` (
	`USER_ID` INT(11) NOT NULL AUTO_INCREMENT,
	`USERNAME` VARCHAR(45) NOT NULL,
	`PASSWORD` VARCHAR(45) NULL DEFAULT NULL,
	`FIRSTNAME` VARCHAR(45) NOT NULL,
	`LASTNAME` VARCHAR(45) NULL DEFAULT NULL,
	`EMAIL` VARCHAR(45) NOT NULL,
	`PHONE` VARCHAR(12) NOT NULL,
	`ROLE_ID` INT(11) NOT NULL,
	`CREATED_DT_TIME` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
	PRIMARY KEY (`USER_ID`),
	UNIQUE INDEX `UNIQUE` (`USERNAME`, `EMAIL`, `PHONE`)
);

CREATE TABLE `ROLE` (
	`ROLE_ID` INT(11) NOT NULL AUTO_INCREMENT,
	`ROLE_NAME` VARCHAR(50) NOT NULL,
	`CREATED_DT_TIME` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
	PRIMARY KEY (`ROLE_ID`)
);

ALTER TABLE `ROLE`
	ADD COLUMN `ROLE_HOMMEPAGE` VARCHAR(100) NULL;

CREATE TABLE `PO` (
	`PO_ID` INT(11) NOT NULL AUTO_INCREMENT,
	`PO_NUMBER` VARCHAR(50) NOT NULL,
	`SUPPLIER_ID` INT(11) NOT NULL,
	`PO_AMOUNT` DOUBLE(10,2) NOT NULL,
	`PAID` DOUBLE(10,2) NOT NULL,
	`OUTSTANDING` DOUBLE(10,2) NOT NULL,
	`ITEM_DATA` VARCHAR(5000) NULL,
	`USER_ID` VARCHAR(255) NOT NULL,
	`CREATED_DT_TIME` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
	PRIMARY KEY (`PO_ID`),
	UNIQUE INDEX `UNIQUE` (`PO_NUMBER`)
);

CREATE TABLE `SERVICE` (
	`SERVICE_ID` INT(11) NOT NULL AUTO_INCREMENT,
	`SERVICE_NAME` VARCHAR(100) NULL DEFAULT '0',
	`SERVICE_PARENT_ID` VARCHAR(100) NULL DEFAULT '0',
	`SERVICE_URL` VARCHAR(100) NULL DEFAULT '0',
	`CREATED_DT_TIME` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
	PRIMARY KEY (`SERVICE_ID`),
	UNIQUE INDEX `UNIQUE` (`SERVICE_URL`)
);


CREATE TABLE `SUPPLIER` (
	`SUPPLIER_ID` INT(11) NOT NULL AUTO_INCREMENT,
	`SUPPLIER_NAME` VARCHAR(255) NULL DEFAULT '0',
	`USER_ID` VARCHAR(255) NULL DEFAULT '0',
	`CREATED_DT_TIME` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
	PRIMARY KEY (`SUPPLIER_ID`)
);

CREATE TABLE `SERVICE_ROLE` (
	`SERVICE_ROLE_ID` INT(11) NOT NULL AUTO_INCREMENT,
	`SERVICE_ID` INT(11) NULL DEFAULT '0',
	`ROLE_ID` INT(11) NULL DEFAULT '0',
	`CREATED_DT_TIME` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
	PRIMARY KEY (`SERVICE_ROLE_ID`)
);

ALTER TABLE `SUPPLIER`
	ADD COLUMN `SUPPLIER_ADDRESS` VARCHAR(255) NULL DEFAULT '0' ,
	ADD COLUMN `CREDIT` VARCHAR(255) NULL DEFAULT '0';

ALTER TABLE `PO`
	CHANGE COLUMN `PO_AMOUNT` `PO_AMOUNT` DOUBLE(10,2) NOT NULL DEFAULT '0.0',
	CHANGE COLUMN `PAID` `PAID` DOUBLE(10,2) NOT NULL DEFAULT '0.0',
	CHANGE COLUMN `OUTSTANDING` `OUTSTANDING` DOUBLE(10,2) NOT NULL DEFAULT '0.0';
	
